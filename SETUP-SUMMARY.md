# Publishing Setup Complete! ✓

## Summary of Changes

Your monorepo is now configured to publish `@mnga.toronto/stencil-components` and `@mnga.toronto/react-components` to npm.

### Files Modified

#### 1. `packages/stencil-components/package.json`

- ✓ Updated package name: `stencil-components` → `@mnga.toronto/stencil-components`
- ✓ Added `publishConfig` with `"access": "public"`

#### 2. `packages/stencil-components/stencil.config.ts`

- ✓ Added `componentCorePackage: '@mnga.toronto/stencil-components'` to React output target
- ✓ This ensures React wrappers use the correct scoped imports

#### 3. `packages/react-components/package.json`

- ✓ Updated package name: `react-components` → `@mnga.toronto/react-components`
- ✓ Updated description
- ✓ Changed dependency: `stencil-components: "*"` → `@mnga.toronto/stencil-components: "^0.0.1"`
- ✓ Added peer dependencies for React (>=16.8.0)
- ✓ Moved `@stencil/react-output-target` to regular dependencies

#### 4. `packages/my-app/package.json`

- ✓ Updated dependency: `react-components: "*"` → `@mnga.toronto/react-components: "*"`

#### 5. `packages/my-app/src/App.tsx`

- ✓ Updated import: `from 'react-components'` → `from '@mnga.toronto/react-components'`

### Files Created

#### 6. `packages/stencil-components/.npmignore`

- ✓ Excludes source files, config files, and tests from npm package
- ✓ Only publishes `dist/` and `loader/` directories

#### 7. `packages/react-components/.npmignore`

- ✓ Excludes source files, lib/, tests, and config files
- ✓ Only publishes `dist/` directory

#### 8. `PUBLISHING.md`

- ✓ Comprehensive guide on how to publish packages
- ✓ Instructions for manual and Lerna-based publishing
- ✓ Pre-publish checklist
- ✓ Troubleshooting tips
- ✓ Usage examples for consumers

#### 9. `SETUP-SUMMARY.md` (this file)

- ✓ Summary of all changes made

### Generated Files (Auto-updated)

#### 10. `packages/react-components/lib/components/stencil-generated/components.ts`

- ✓ Regenerated by Stencil with correct imports
- ✓ Now imports from `@mnga.toronto/stencil-components` instead of `stencil-components`

## Verification

All packages have been built and tested:

- ✓ Stencil components built successfully
- ✓ React components built successfully
- ✓ Test app (my-app) builds successfully with scoped packages

## Quick Publishing Commands

### Test Locally First

```bash
# Build all packages
cd packages/stencil-components && npm run build
cd ../react-components && npm run build

# Test the app
cd ../my-app && npm run dev
```

### Publish to npm

**Before publishing**, make sure you:

1. Are logged into npm: `npm login`
2. Have access to publish under the `@mnga.toronto` scope

**Option 1: Manual (safest for first time)**

```bash
cd packages/stencil-components
npm publish --access public

cd ../react-components
npm publish --access public
```

**Option 2: Using Lerna (recommended)**

```bash
# From project root
lerna publish
```

## Package URLs (after publishing)

- Stencil Components: `https://www.npmjs.com/package/@mnga.toronto/stencil-components`
- React Components: `https://www.npmjs.com/package/@mnga.toronto/react-components`

## Installing Published Packages

Once published, users can install with:

```bash
# For React projects
npm install @mnga.toronto/react-components

# For vanilla JS/framework-agnostic projects
npm install @mnga.toronto/stencil-components
```

## Next Steps

1. **Test Publishing** (optional): Use `npm publish --dry-run` to see what files will be included
2. **Version Management**: Consider using `lerna version` to manage versions across packages
3. **Automation**: Set up CI/CD pipeline for automated publishing (see PUBLISHING.md)
4. **Documentation**: Update README.md files with installation and usage instructions
5. **Changelog**: Create CHANGELOG.md to track changes between versions

## Important Notes

- **Publish Order**: Always publish `@mnga.toronto/stencil-components` before `@mnga.toronto/react-components`
- **Version Sync**: Keep version numbers in sync between packages
- **Breaking Changes**: Use semantic versioning properly to communicate breaking changes
- **Scope Access**: The `@mnga.toronto` scope must allow public packages (configured in `publishConfig`)

## Rollback Plan

If something goes wrong after publishing:

- You can unpublish within 72 hours: `npm unpublish @mnga.toronto/package-name@version`
- After 72 hours, you can only deprecate: `npm deprecate @mnga.toronto/package-name@version "reason"`

---

**Status**: ✅ Ready to Publish

For detailed publishing instructions, see [PUBLISHING.md](./PUBLISHING.md)
